package com.springboot.springboot.dto.planning;

import java.util.List;
import java.util.stream.Collectors;

import com.springboot.springboot.entity.planning.SessionFormation;
import com.springboot.springboot.entity.planning.Creneau;

public class SessionAVenirDTO {

    private String nom;
    private String formateurNom;
    private List<CreneauDTO> creneaux;

    // Constructeur depuis l'entité SessionFormation
    public SessionAVenirDTO(SessionFormation session) {
        if (session != null) {
            this.nom = session.getNomCours() != null ? session.getNomCours() : "";
            
            // Formateur : vérification pour éviter NullPointerException ou LazyInitializationException
            if (session.getFormateur() != null) {
                try {
                    this.formateurNom = session.getFormateur().getNom();
                } catch (Exception e) {
                    this.formateurNom = "Nom indisponible";
                }
            } else {
                this.formateurNom = "Nom indisponible";
            }

            // Créneaux
            if (session.getCreneaux() != null) {
                this.creneaux = session.getCreneaux().stream()
                        .map(CreneauDTO::new)
                        .collect(Collectors.toList());
            }
        }
    }

    // Getters et setters
    public String getNom() {
        return nom;
    }

    public String getFormateurNom() {
        return formateurNom;
    }

    public List<CreneauDTO> getCreneaux() {
        return creneaux;
    }
}
